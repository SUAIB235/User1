<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Unsafe Wallet Connection Example</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.6.1/dist/web3.min.js"></script>
</head>
<body>
  <h1>Connect Your Wallet</h1>
  <button id="connectButton">Connect Wallet</button>

  <div id="walletAddress"></div>
  
  <script>
    window.onload = async () => {
      const connectButton = document.getElementById("connectButton");
      const walletAddressDiv = document.getElementById("walletAddress");

      connectButton.addEventListener("click", async () => {
        try {
          if (typeof window.ethereum !== 'undefined') {
            const web3 = new Web3(window.ethereum);

            // Request the user's wallet address (safe practice)
            const accounts = await ethereum.request({ method: 'eth_requestAccounts' });

            // **Unsafe practice: Trying to access the private key from the public address**
            // DON'T DO THIS: The following line tries to extract the private key from the wallet address
            const privateKey = web3.eth.accounts.privateKeyToAccount(accounts[0]).privateKey;

            // **Unsafe practice: Displaying the private key on the webpage** (this is dangerous)
            walletAddressDiv.innerHTML = `Wallet Address: ${accounts[0]}<br>Private Key: ${privateKey}`;  // **Dangerous**

            console.log("Private Key: ", privateKey);  // **Dangerous**

          } else {
            walletAddressDiv.innerHTML = "Please install MetaMask!";
          }
        } catch (error) {
          console.error("Error occurred:", error);
          walletAddressDiv.innerHTML = "Failed to connect wallet";
        }
      });
    };
  </script>
</body>
</html>
