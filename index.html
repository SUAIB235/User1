<!DOCTYPE html>
<html>
<head>
  <title>Store Env to GitHub</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: auto; padding: 2rem; }
    label { display: block; margin-top: 1rem; }
    input { width: 100%; padding: 0.5rem; }
    button { margin-top: 1.5rem; padding: 0.7rem 1.5rem; }
    #result { margin-top: 2rem; font-weight: bold; }
  </style>
</head>
<body>
  <h2>Env File Generator</h2>
  <form id="envForm">
    <label>Password: <input type="password" id="password" required></label>
    <label>Telegram Bot Token: <input type="text" id="telegramToken" required></label>
    <label>Telegram Chat ID: <input type="text" id="chatId" required></label>
    <label>Binance API Key: <input type="text" id="binanceKey" required></label>
    <label>Binance Secret: <input type="text" id="binanceSecret" required></label>
    <button type="submit">Submit</button>
  </form>

  <div id="result"></div>

  <script>
    const firebaseEndpoint = "https://us-central1-YOUR_FIREBASE_PROJECT.cloudfunctions.net/storeEnv"; // replace with your actual URL

    document.getElementById('envForm').addEventListener('submit', async function(e) {
      e.preventDefault();

      const payload = {
        password: document.getElementById('password').value,
        telegramToken: document.getElementById('telegramToken').value,
        chatId: document.getElementById('chatId').value,
        binanceKey: document.getElementById('binanceKey').value,
        binanceSecret: document.getElementById('binanceSecret').value
      };

      document.getElementById('result').textContent = "Submitting...";

      try {
        const res = await fetch(firebaseEndpoint, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });

        const data = await res.json();

        if (data.link) {
          document.getElementById('result').innerHTML = `Saved: <a href="${data.link}" target="_blank">${data.link}</a>`;
        } else {
          document.getElementById('result').textContent = "Error: " + (data.error || "Unknown error");
        }
      } catch (err) {
        document.getElementById('result').textContent = "Error: " + err.message;
      }
    });
  </script>
</body>
</html>
